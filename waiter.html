<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waiter App</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f4f6f8;
            padding: 20px;
            margin: 0;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            margin: 0 auto;
        }

        select,
        input,
        button {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 16px;
            box-sizing: border-box;
        }

        .send-btn {
            background: #007bff;
            color: white;
            font-weight: bold;
            border: none;
            cursor: pointer;
        }

        .send-btn:hover {
            background: #0056b3;
        }

        h2 {
            text-align: center;
            margin-top: 0;
        }

        .cart-preview {
            background: #eee;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            min-height: 50px;
        }

        .item-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }
    </style>
</head>

<body>

    <div class="card">
        <h2>üì± Take Order</h2>

        <label>Table Number:</label>
        <select id="tableSelect">
            <option value="1">Table 1</option>
            <option value="2">Table 2</option>
            <option value="3">Table 3</option>
            <option value="4">Table 4</option>
            <option value="5">Table 5</option>
            <option value="6">Table 6</option>
        </select>

        <label>Category:</label>
        <select id="categorySelect" onchange="loadItems()">
            <option value="">Select Category</option>
            <option value="laps">Go-Kart Laps</option>
            <option value="starters-veg">Starters Veg</option>
            <option value="burgers">Burgers</option>
            <option value="pizzas">Pizzas</option>
            <option value="mojitos">Mojitos</option>
        </select>

        <label>Item:</label>
        <select id="itemSelect">
            <option value="">Select Category First</option>
        </select>

        <label>Qty:</label>
        <input type="number" id="qty" value="1" min="1">

        <button onclick="addToCart()" style="background: #28a745; color: white;">+ Add Item</button>

        <h3>Order Summary:</h3>
        <div id="cartDisplay" class="cart-preview">No items</div>

        <button class="send-btn" onclick="sendToKitchen()">üöÄ Send to Kitchen</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // --- PASTE YOUR FIREBASE CONFIG HERE (SAME AS KITCHEN) ---
        const firebaseConfig = {
            apiKey: "AIzaSyBnCmtp1s9PeEqOO3fW6n-mzrqCMFZk9to",
            authDomain: "arena53-pos.firebaseapp.com",
            databaseURL: "https://arena53-pos-default-rtdb.firebaseio.com",
            projectId: "arena53-pos",
            storageBucket: "arena53-pos.firebasestorage.app",
            messagingSenderId: "291743234318",
            appId: "1:291743234318:web:510b893fc6b8a64a703f5f"
        };
        // ---------------------------------------------------------

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let cart = [];

        // Simple Menu Data (Copy full menu from script.js)
        const menu = {
            "laps": ["8 laps", "12 laps", "16 laps"],
            "starters-veg": ["Mushroom Chilly", "Paneer Manchurian", "Baby Corn"],
            "burgers": ["Veg BBQ Burger", "Chicken BBQ Burger"],
            "pizzas": ["Margherita", "Corn Pizza", "Chicken Tikka"],
            "mojitos": ["Lemon Mojito", "Green Apple", "Virgin Mojito"]
        };

        function loadItems() {
            const cat = document.getElementById('categorySelect').value;
            const itemSel = document.getElementById('itemSelect');
            itemSel.innerHTML = '';
            if (menu[cat]) {
                menu[cat].forEach(item => {
                    const opt = document.createElement('option');
                    opt.value = item;
                    opt.textContent = item;
                    itemSel.appendChild(opt);
                });
            }
        }

        function addToCart() {
            const item = document.getElementById('itemSelect').value;
            const qty = document.getElementById('qty').value;
            if (!item) return alert("Select an item");

            cart.push({ name: item, qty: qty });
            renderCart();
        }

        function renderCart() {
            const div = document.getElementById('cartDisplay');
            if (cart.length === 0) { div.innerHTML = 'No items'; return; }
            let html = '';
            cart.forEach(c => {
                html += `<div class="item-row"><span>${c.name}</span><span>x${c.qty}</span></div>`;
            });
            div.innerHTML = html;
        }

        function sendToKitchen() {
            if (cart.length === 0) return alert("Cart is empty");
            const table = document.getElementById('tableSelect').value;

            const orderData = {
                table: table,
                items: cart,
                status: 'pending',
                time: new Date().toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' })
            };

            // Push to Firebase
            db.ref('orders').push(orderData, (error) => {
                if (error) {
                    alert('Error saving data: ' + error.message);
                } else {
                    alert('Order Sent to Kitchen! üë®‚Äçüç≥');
                    cart = [];
                    renderCart();
                }
            });
        }
    </script>
</body>

</html>